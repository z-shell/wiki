---
id: customization
title: "\U0001F3D7 Configuration management"
description: "User preferences, environment, and configuration."
image: /img/png/theme/z/320x320.png
sidebar_position: 2
keywords:
  - config
  - preferences
toc_min_heading_level: 2
toc_max_heading_level: 3
hide_table_of_contents: false
---

import MultiplePromptsExample from "@site/src/components/Markdown/_multiple_prompts_example.mdx";

## <Icon name="hashtag" /> Hash parameter

:::info Related

- [standard parameter naming][]

:::

Set the initial hash definition and custom values, before enabling Zi.

Example:

```shell showLineNumbers
typeset -A ZI
ZI[BIN_DIR]="some/custom/path/to/bin"
source "${ZI[BIN_DIR]}/zi.zsh"
```

### <Icon name="sliders" /> Customize paths {#customizing-paths}

```mdx-code-block
<APITable>
```

| Hash Field                           | Default                       | Description                                    |
| ------------------------------------ | ----------------------------- | ---------------------------------------------- |
| `ZI[HOME_DIR]`                       | `$HOME/.zi`                   | Where Zi should create all working directories |
| `ZI[BIN_DIR]`                        | `$HOME/.zi/bin`               | Directory where Zi code resides                |
| `ZI[COMPLETIONS_DIR]`                | `$ZI[HOME_DIR]/completions`   | Completion working directory                   |
| `ZI[CACHE_DIR]`                      | `$HOME/.cache/zi`             | Cache directory                                |
| `ZI[CONFIG_DIR]`                     | `$HOME/.config/zi`            | Directory for configuration files              |
| `ZI[MAN_DIR]`                        | `$ZPFX/man`                   | Directory to store manpages                    |
| `ZI[LOG_DIR]`                        | `$ZI[CACHE_DIR]/log`          | Directory to store log files                   |
| `ZI[PLUGINS_DIR]`                    | `$ZI[HOME_DIR]/plugins`       | Plugins working directory                      |
| `ZI[SNIPPETS_DIR]`                   | `$ZI[HOME_DIR]/snippets`      | Snippets working directory                     |
| `ZI[ZCOMPDUMP_PATH]`                 | `${ZI[CACHE_DIR]}/.zcompdump` | Path to `.zcompdump` file                      |
| `ZI[ZMODULES_DIR]`                   | `$ZI[HOME_DIR]/zmodules`      | Zsh modules working directory                  |
| [ZPFX][global-parameter-with-prefix] | `$ZI[HOME_DIR]/polaris`       | Directory to store binary and related files    |

```mdx-code-block
</APITable>
```

### <Icon name="sliders" /> Modify settings {#modify-settings}

```mdx-code-block
<APITable>
```

| Hash Field                       | Default     | Description                                                                                                                                                                                               |
| -------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ZI[OPTIMIZE_OUT_DISK_ACCESSES]` | `undefined` | If set to `1`, will skip checking if a turbo-loaded object exists on the disk. This option can give a performance gain of about 10 ms out of 150 ms (e.g: Zsh will start up in 140 ms instead of 150 ms). |
| `ZI[COMPINIT_OPTS]`              | `undefined` | Options for `compinit` call (e.g: done by `zicompinit`), commonly used with `-C` to speed up loading                                                                                                      |
| `ZI[MUTE_WARNINGS]`              | `undefined` | If set to `1`, mutes some warnings, specifically the `plugin already registered` warning                                                                                                                  |
| `ZI[PKG_OWNER]`                  | `z-shell`   | Owner of the [packages][] (`zi pack …`)                                                                                                                                                                   |

```mdx-code-block
</APITable>
```

## <Icon name="square-up-right" /> Non-GitHub (Local) Plugins {#non-github-local-plugins}

Use the `create` subcommand with user name `_local` (the default) to create the plugin's skeleton in `$ZI[PLUGINS_DIR]`. It will be not connected with the GitHub repository (because of the user name being `_local`). To enter the plugin's directory use the `cd` command with just the plugin's name (without `_local`, it's optional).

If the username is not `_local`, then Zi will create a repository also on GitHub and set up the correct repository origin.

## <Icon name="git-alt" /> Extending Git {#extending-git}

Several projects provide git extensions. Installing them with Zi has many benefits:

- all files are under `$HOME` – no administrator rights are needed,
- declarative setup (like Chef or Puppet) – copying `.zshrc` to a different account brings also git-related setup,
- easy update by e.g: `zi update --all`.

Below is a configuration that adds multiple git extensions, loaded in Turbo mode, 1 second after prompt, with the use of the [bin-gem-node][z-a-bin-gem-node] annex:

```shell title="~/.zshrc" showLineNumbers
zi as'null' wait'1' lucid for \
  sbin  Fakerr/git-recall \
  sbin  cloneopts paulirish/git-open \
  sbin  paulirish/git-recent \
  sbin  davidosomething/git-my \
  sbin  iwata/git-now \
  sbin atload'export _MENU_THEME=legacy' \
  sbin z-shell/z-a-meta-plugins

zi for \
  sbin wait'1' lucid z-shell/z-a-bin-gem-node \
  sbin wait'1' lucid z-shell/z-a-patch-dl
```

## <Icon name="gears" /> [Zsh option][zsh-options]: `setopt` {#zsh-option-setopt}

### <Icon name="clock-rotate-left" /> History optimization {#history-optimization}

```shell title="~/.zshrc" showLineNumbers
# History command configuration
setopt extended_history
setopt hist_expire_dups_first
setopt hist_ignore_dups
setopt hist_ignore_all_dups
setopt hist_ignore_space
setopt hist_find_no_dups
setopt hist_save_no_dups
setopt share_history

HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
```

## <Icon name="wand-magic-sparkles" /> Style the [completion system][completion-system-configuration] with: `zstyle` {#style-the-completion-system-with-zstyle}

### <Icon name="wand-sparkles" /> Fuzzy matching of completions {#fuzzy-matching-of-completions}

```shell title="~/.zshrc" showLineNumbers
# Use caching so that commands like apt and dpkg complete are useable
zstyle ':completion::complete:*' use-cache 1

# Case-insensitive (all), partial-word and substring completion
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*'
```

### <Icon name="terminal" /> Pretty completions {#pretty-completions}

```shell title="~/.zshrc" showLineNumbers
# Pretty-print completion results
zstyle ':completion:*:descriptions' format '%B%d%b'
zstyle ':completion:*:options' auto-description '%d'

# Recently used commands are shown first in completion
zstyle ':completion:*' file-sort modification reverse

# Show completion suggestions in a menu
zstyle ':completion:*' menu select
```

### <Icon name="terminal" /> Do menu-driven completion {#do-menu-driven-completion}

```shell title="~/.zshrc" showLineNumbers
# Menu-driven completion
zstyle ':completion:*' menu select=2
```

### <Icon name="fill-drip" /> Color completion for [some things][color-completion-using-zsh-modules-on] {#color-completion-for-some-things}

```shell title="~/.zshrc" showLineNumbers
# Color completion
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"
```

## <Icon name="power-off" /> Disabling System-Wide `compinit` Call (Ubuntu) {#disabling-system-wide-compinit-call-ubuntu}

To disable the system-wide `compinit` call that's done by the `/etc/zsh/zshrc` file on Ubuntu, add `unsetopt GLOBAL_RCS` to your `~/.zshenv` file. This will prevent the `/etc/zsh/zshrc` file from being sourced, and thus prevent the system-wide `compinit` call.

This is useful if you want to use your own `compinit` call, or if you want to use a plugin manager that handles `compinit` for you.

## <Icon name="list-check" /> Multiple prompts {#multiple-prompts}

It is possible to have multiple prompts, e.g. on the left and on the right. It is being accomplished by using `PROMPT` and `RPROMPT` variables. Zi can manage multiple prompts installed as plugins, by switching them with the use of the `ziconv` command, which is a short for `zi conv` (`convey`).

Example of a right-side prompt, that shows the time:

```shell title="~/.zshrc" showLineNumbers
zi ice as"program" from"gh-r" lucid \
  atclone"RPROMPT=\"`./datetime-prompt`\"; zicdreplay" \
  atpull"%atclone" for \
    junghoon-shin/datetime-prompt
```

To have it loaded, unload the previous `RPROMPT` with `zi unload ...` (`ziconv` can do this automatically, see the next section).

To have a prompt on the right side, you need to set the `RPROMPT` variable. The `atclone` ice is used to set the `RPROMPT` variable to the output of the `datetime-prompt` script. The `zicdreplay` command is used to refresh the prompt.

The `atpull` ice is used to do the same thing when the plugin is updated.

The `junghoon-shin/datetime-prompt` plugin is a simple script that prints the current date and time.

### <Icon name="layer-group" /> Loading and unloading themes (8 examples) {#loading-and-unloading-themes-8-examples}

<MultiplePromptsExample />

[zsh-options]: https://zsh.sourceforge.io/Doc/Release/Options.html
[completion-system-configuration]: https://zsh.sourceforge.io/Doc/Release/Completion-System.html#Completion-System-Configuration
[color-completion-using-zsh-modules-on]: https://zsh.sourceforge.io/Doc/Release/Completion-Widgets.html#Color-Completion-Using-Zsh-Modules-On
[global-parameter-with-prefix]: https://zsh.sourceforge.io/Doc/Release/Parameters.html#Parameters-Set-By-The-Shell
[packages]: /ecosystem/packages/synopsis
[standard parameter naming]: /community/zsh_plugin_standard#standard-parameter-naming
[z-a-bin-gem-node]: https://github.com/z-shell/z-a-bin-gem-node
